(function(){"use strict";var e={92:function(e,t,o){var n=o(963),a=o(252);const s=(0,a._)("div",{class:"w-8"},null,-1);function r(e,t,o,n,r,i){const c=(0,a.up)("router-link"),l=(0,a.up)("van-nav-bar"),d=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{style:{"background-color":"#e0e9f5"},clickable:!1},{title:(0,a.w5)((()=>[(0,a._)("span",{class:"text-4xl cursor-pointer",onClick:t[0]||(t[0]=e=>n.goHome())},"🆂🆃🅾🆁🆈🅰🅸")])),right:(0,a.w5)((()=>[(0,a.Wm)(c,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1}),s,(0,a.Wm)(c,{to:"/about"},{default:(0,a.w5)((()=>[(0,a.Uk)("About")])),_:1})])),_:1}),(0,a.Wm)(d)],64)}var i=o(907),c=o(406),l=o(201),d={components:{[i.zx.name]:i.zx,[c.l2.name]:c.l2},setup(){const e=(0,l.tv)(),t=function(){e.push("/")};return{goHome:t}}},u=o(744);const p=(0,u.Z)(d,[["render",r]]);var m=p,h=o(577);const y=e=>((0,a.dD)("data-v-4c84bd5c"),e=e(),(0,a.Cn)(),e),v={class:"flex flex-wrap"},x={class:"md:w-5/12 w-full mb-12"},f={class:"flex flex-col items-center justify-end h-full p-4"},g={class:"w-full overflow-scroll flex flex-col-reverse conversation-list"},w={ref:"chatBottom"},b={class:"mx-4 p-4 bg-white rounded-lg"},N={key:0},k=["innerHTML","onDragstart"],I={key:1,class:"flex gap-4"},T=["src","onDragstart"],C={key:2},S={class:"w-full"},_={class:"flex"},D=y((()=>(0,a._)("div",{class:"w-2"},null,-1))),E=y((()=>(0,a._)("img",{src:"images/mic.png",width:"20"},null,-1))),O={class:"md:w-7/12 w-full"},W=["height"],j=y((()=>(0,a._)("defs",null,[(0,a._)("marker",{id:"my_arrow",viewBox:"0 0 10 10",refX:"0",refY:"5",markerWidth:"3",markerHeight:"3",orient:"auto-start-reverse"},[(0,a._)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#DC143C","fill-opacity":"0.5"})])],-1))),B=["x1","y1","x2","y2","onClick"];function M(e,t,o,s,r,i){const c=(0,a.up)("van-image"),l=(0,a.up)("my-buttons"),d=(0,a.up)("van-button"),u=(0,a.up)("van-field"),p=(0,a.up)("van-cell-group"),m=(0,a.up)("my-node"),y=(0,a.up)("my-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",v,[(0,a._)("div",x,[(0,a._)("div",{class:"m-2 theme-color rounded-lg",onDragover:t[5]||(t[5]=(...e)=>s.onDragover&&s.onDragover(...e))},[(0,a._)("div",f,[(0,a._)("div",g,[(0,a._)("div",w,null,512),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.history,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,h.C_)(["flex items-start py-2 mb-8",{"flex-row-reverse":e.self}]),key:e.nodeId},[(0,a._)("div",null,[e.self?((0,a.wg)(),(0,a.j4)(c,{key:0,width:"3rem",height:"3rem",round:"",fit:"cover",src:"images/test_me.png"})):((0,a.wg)(),(0,a.j4)(c,{key:1,width:"3rem",height:"3rem",round:"",fit:"cover",src:"images/test_ai.png"}))]),(0,a._)("div",b,[(0,a._)("div",{class:(0,h.C_)(["cursor-move",{"text-right":e.self}])},[e.type===s.NodeTypes.text?((0,a.wg)(),(0,a.iD)("div",N,[(0,a._)("span",{innerHTML:e.content[0],draggable:"true",onDragstart:t=>s.startDrag(e.content[0],e.type)},null,40,k)])):(0,a.kq)("",!0),e.type===s.NodeTypes.image?((0,a.wg)(),(0,a.iD)("div",I,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content,((t,o)=>((0,a.wg)(),(0,a.iD)("img",{key:o,width:"150","aspect-ratio":"4/3",cover:"",src:t,draggable:"true",onDragstart:o=>s.startDrag(t,e.type)},null,40,T)))),128))])):(0,a.kq)("",!0),e.type===s.NodeTypes.buttons?((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(l,{content:e.content,onButtonClicked:s.pickOption},null,8,["content","onButtonClicked"])])):(0,a.kq)("",!0)],2)])],2)))),128))]),(0,a._)("div",S,[s.sending?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(p,{key:0,inset:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:s.chatToSend,"onUpdate:modelValue":t[3]||(t[3]=e=>s.chatToSend=e),label:"",onKeyup:t[4]||(t[4]=(0,n.D2)((e=>s.enterText()),["enter"]))},{extra:(0,a.w5)((()=>[(0,a._)("div",_,[s.recording?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0,size:"small",type:"success",onClick:t[0]||(t[0]=e=>s.enterText())},{default:(0,a.w5)((()=>[(0,a.Uk)("Send")])),_:1})),D,s.recording?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:1,size:"small",type:"primary",onClick:t[1]||(t[1]=e=>s.startRecording()),class:"pl-4"},{default:(0,a.w5)((()=>[E])),_:1})),s.recording?((0,a.wg)(),(0,a.j4)(d,{key:2,size:"small",type:"danger",onClick:t[2]||(t[2]=e=>s.stopRecording())},{default:(0,a.w5)((()=>[(0,a.Uk)("Stop")])),_:1})):(0,a.kq)("",!0)])])),_:1},8,["modelValue"])])),_:1}))])])],32)]),(0,a._)("div",O,[(0,a._)("div",{class:"m-2 theme-color rounded-lg overflow-scroll",onDragover:t[8]||(t[8]=(...e)=>s.onDragover&&s.onDragover(...e)),onDrop:t[9]||(t[9]=(...e)=>s.onDrop&&s.onDrop(...e))},[((0,a.wg)(),(0,a.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",class:"canvas",width:"1200",height:s.canvasHeight,onMousemove:t[6]||(t[6]=(...e)=>s.mosemove&&s.mosemove(...e)),onMouseup:t[7]||(t[7]=(...e)=>s.mouseup&&s.mouseup(...e))},[j,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.canvasNodes,((e,t)=>((0,a.wg)(),(0,a.j4)(m,{key:e.id,node:e,onOnMouseDown:s.onNodeMouseDown,onOnNodeClicked:o=>s.clickCanvasNode(e,t),onNewPosition:t=>s.newPosition(t,e),onUpdateSize:t=>s.updateSize(t,e)},null,8,["node","onOnMouseDown","onOnNodeClicked","onNewPosition","onUpdateSize"])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.connections,((e,t)=>((0,a.wg)(),(0,a.iD)("line",{key:t,x1:e.sx,y1:e.sy,x2:e.ex,y2:e.ey,stroke:"#DC143C","stroke-width":"6","stroke-opacity":"0.5","marker-end":"url(#my_arrow)",onClick:e=>s.removeLine(t)},null,8,B)))),128))],40,W))],32)])]),(0,a.Wm)(y,{ref:"editor",onRemoveNode:t[10]||(t[10]=e=>s.removeCanvasNode())},null,512)],64)}var Y=o(632),F=o(262),H=o(480),P=o(864),A=o(267),U=o(41),V=o(191),z=o(349),L=o.n(z),q={image:"img",text:"txt",buttons:"btn",k1:"ixKGMhIZdoT3BlbkFJkRRXX",k2:"sk-8j5wEgLGIE",k3:"jmeF2qA0Pmd8gtd",n1:"==RmIaoSWBIIxXrwSX",n2:"BaW/tolN0Dg",n3:"HRPOl3nzwy/"};const R=["x","y","width","height"],Z=["width"],J=["width","height"],G=["width","src"];function K(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("svg",{x:n.x,y:n.y,width:o.node.w,height:o.node.h,onMousedown:t[0]||(t[0]=(...e)=>n.mousedown&&n.mousedown(...e)),class:"cursor-pointer",onMouseenter:t[1]||(t[1]=(...e)=>n.mouseenter&&n.mouseenter(...e)),onMouseleave:t[2]||(t[2]=(...e)=>n.mouseleave&&n.mouseleave(...e)),onMouseup:t[3]||(t[3]=(...e)=>n.mouseup&&n.mouseup(...e))},[o.node.varName?((0,a.wg)(),(0,a.iD)("rect",{key:0,width:n.varTitleWidth,height:"40",x:"10",y:"10",fill:"#ffffff","fill-opacity":"0.7","stroke-width":"3",stroke:"#00A3FE",rx:"15"},null,8,Z)):(0,a.kq)("",!0),o.node.varName?((0,a.wg)(),(0,a.iD)("text",{key:1,x:"20",y:"35",ref:"varTitle",class:"var-title"},(0,h.zw)(o.node.varName),513)):(0,a.kq)("",!0),((0,a.wg)(),(0,a.iD)("foreignObject",{width:o.node.w,height:o.node.h,x:"15",y:"50"},[o.node.type===n.NodeTypes.text?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,h.C_)([o.node.class,"px-3"]),ref:"textContent"},(0,h.zw)(o.node.content),3)):(0,a.kq)("",!0),o.node.type===n.NodeTypes.image?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,h.C_)(o.node.class)},[(0,a._)("img",{width:o.node.w-50,src:o.node.content},null,8,G)],2)):(0,a.kq)("",!0)],8,J))],40,R)}var X={props:{node:Object},setup(e,{emit:t}){const o=(0,F.iH)(e.node.x),n=(0,F.iH)(e.node.y);let s=!1;const r=function(e,a){s=!0,o.value+=e,n.value+=a,t("newPosition",{x:o.value,y:n.value,tw:m.value})},i=function(e){e.stopPropagation(),e.preventDefault(),t("onMouseDown",r)},c=function(){},l=function(){},d=function(){s||t("onNodeClicked"),s=!1},u=(0,F.iH)(null),p=(0,F.iH)(null),m=(0,F.iH)(50),h=function(){e.node.varName&&p.value&&(m.value=p.value.getBBox().width+20),u.value&&t("updateSize",{h:u.value.offsetHeight+50})};(0,a.bv)(h);let y=(0,F.iH)(e.node.content.length);return(0,a.ic)((function(){y.value!==e.node.content.length&&(console.log("text changed!"),y.value=e.node.content.length,h())})),{NodeTypes:q,x:o,y:n,mousedown:i,mouseenter:c,mouseleave:l,mouseup:d,varTitle:p,varTitleWidth:m,textContent:u}}};const Q=(0,u.Z)(X,[["render",K],["__scopeId","data-v-08e4e66a"]]);var $=Q;const ee={class:"flex flex-wrap gap-4"},te=["onClick"];function oe(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("div",ee,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.buttons,((e,t)=>((0,a.wg)(),(0,a.iD)("button",{class:(0,h.C_)(e.styleClass),key:t,onClick:t=>n.clickButton(e)},(0,h.zw)(e.text),11,te)))),128))])}var ne={props:{content:Array},setup(e,{emit:t}){const o=(0,F.iH)(e.content);o.value.forEach((function(e){e.styleClass=["button-37"],e.other?e.styleClass.push("button-color-2"):e.styleClass.push("button-color-1")}));const n=function(e){t("buttonClicked",e)};return{buttons:o,clickButton:n}}};const ae=(0,u.Z)(ne,[["render",oe],["__scopeId","data-v-3fb0aae6"]]);var se=ae,re={api:null,user:null,ninja:null,checkUser(){return!!this.user},async serviceRephrase(e,t,o,n){if(!this.checkUser())return"";const a=this.user;let s="rephrase this text '{input}' with correct grammar, that is understandable by {grade}-grade students, and do not use more than {maxWords} words.".replace("{input}",e).replace("{grade}",t).replace("{maxWords}",o);n&&(s="rephrase this text '{input}' with correct grammar to the form of '{form}', that is understandable by {grade}-grade students, and do not use more than {maxWords} words.".replace("{input}",e).replace("{grade}",t).replace("{maxWords}",o).replace("{form}",n));const r=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"user",content:s}],user:a});return console.log(r),r.choices[0].message.content},async serviceWriteFromSeed(e,t,o,n,a,s){if(!this.checkUser())return"";const r=this.user,i="Write '{object}' for '{purpose}' based on this content '{seed}'. Do not exceed {maxWords} words.",c=i.replace("{object}",t).replace("{purpose}",o).replace("{maxWords}",a).replace("{seed}",e);console.log(c);const l="You are a teacher to teach students how to make '{subject}', you will generate appropriate exemplary writing for {grade}-grade students to follow.".replace("{subject}",s),d=l.replace("{grade}",n),u=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:d},{role:"user",content:c}],user:r});return console.log(u),u.choices[0].message.content},async serviceListIdeasFromIdea(e,t,o,n){if(!this.checkUser())return"";const a=this.user,s="Based on the idea of '{idea}', list {number} {term} which could be '{description}' in this idea.",r=s.replace("{idea}",e).replace("{term}",t).replace("{number}",n).replace("{description}",o);console.log(r);const i=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are an idea generator, and you only reply with JSON format. Only write out the result as a single array of Strings within a JSON string array under the attribute named 'items'."},{role:"user",content:r}],user:a});return console.log(i),i.choices[0].message.content},async serviceListStoryIdeas(e,t,o,n){if(!this.checkUser())return"";const a=this.user,s="List {number} story ideas about '{seed}', which are easy for {grade}-grade school students to understand and follow. Describe each idea with only one short sentence, do not use more than {maxWords} words.",r=s.replace("{seed}",e).replace("{number}",t).replace("{grade}",o).replace("{maxWords}",n);console.log(r);const i=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are an idea generator, and you only reply with JSON format. Only write out the result as a single array of Strings within a JSON string array under the attribute named 'items'."},{role:"user",content:r}],user:a});return console.log(i),i.choices[0].message.content},async serviceMakeImage(e){if(!this.checkUser())return"";const t=this.user,o="image for kids, no words, no text, {text}".replace("{text}",e);console.log(o);const n=await this.api.images.generate({prompt:o,n:2,size:"512x512",user:t}),a=[];return n.data.forEach((function(e){a.push(e.url)})),a},async serviceFreeImage(e){if(!this.checkUser())return"";const t=this.user;console.log(e);const o=await this.api.images.generate({prompt:e,n:2,size:"512x512",user:t}),n=[];return o.data.forEach((function(e){n.push(e.url)})),n},async serviceGradeWriting(e){if(!this.checkUser())return"";const t=this.user,o="Grade this writing '{text}', scale from 50 to 100 based on the quality of the writing. Provide a list of feedback on the clarity, quality, grammar, word choices, and sentence structure. Do not exceed 100 words.".replace("{text}",e);console.log(o);const n="You are a teacher to teach students how to make creative writing, by providing appropriate feedback and encouraging grade. Your feedback must be easy to understand for 3-grade students.",a=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:n},{role:"user",content:o}],user:t});return console.log(a),a.choices[0].message.content},async serviceTranslate(e){if(!this.checkUser())return"";const t=this.user,o="{text}".replace("{text}",e),n="You are a multi-language translator, you will translate everything provided into English, the text to be translated may be a combination of any number of different languages. Do not translate anything that is not appropriate for children, do not translate inappropriate content such as sex, violence, and profanity.",a=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:n},{role:"user",content:o}],temperature:.1,user:t});return console.log(a),a.choices[0].message.content},async serviceChatMemory(e,t){const o=this.user;e&&t.push({role:"user",content:e}),console.log(t);const n=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:t,user:o});return t.push(n.choices[0].message),n.choices[0].message.content},async serviceComplete(e){const t=this.user,o=await this.api.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"user",content:e}],user:t});return console.log(o),o.choices[0].message.content},async serviceCompareText(e,t){const o=await fetch("https://api.api-ninjas.com/v1/textsimilarity",{method:"POST",headers:{"X-Api-Key":this.ninja},body:JSON.stringify({text_1:e,text_2:t})}),n=await o.json();console.log(e,"\n",t),console.log(n);const a=100*n.similarity;return a.toFixed(0)}};const ie={class:"p-2 h-96"};function ce(e,t,o,s,r,i){const c=(0,a.up)("van-dialog");return(0,a.wg)(),(0,a.j4)(c,{show:s.show,"onUpdate:show":t[1]||(t[1]=e=>s.show=e),title:"Editor Window",showConfirmButton:!0,closeOnClickOverlay:!0,width:"640",showCancelButton:!0,onConfirm:t[2]||(t[2]=e=>s.confirm())},{default:(0,a.w5)((()=>[(0,a._)("div",ie,[(0,a.wy)((0,a._)("textarea",{type:"textArea",class:"border w-full h-48","onUpdate:modelValue":t[0]||(t[0]=e=>s.userText=e)},null,512),[[n.nr,s.userText]])])])),_:1},8,["show"])}var le={assignVar(e,t,o){let n=e;return t.forEach((function(e){n.includes("{"+e+"}")&&(n=n.replace("{"+e+"}",o.get(e)))})),n}},de={store:new Map,data:new Map,records:new Map,canvasNodes:null,canvasNodesMap:null,conversation:null,actions:[],reset(e,t,o,n){const a=this;this.store.clear(),this.data.clear(),this.actions=[],e.forEach((function(e){e.id&&a.data.set(e.id,e)})),a.canvasNodes=t,a.canvasNodesMap=o,a.conversation=n},proceed(e,t){const o=this;o.data.has(e)?(t.removeNode(),setTimeout((async function(){const n=o.data.get(e);if(n.info){let e=n.info;n.varNames&&(e=le.assignVar(e,n.varNames,o.store)),o.addTextNode(e)}console.log("section: "+n.id),o.actions=JSON.parse(JSON.stringify(n.actions)),await o.performActions(t)}),1e3)):alert("Course data is not complete!")},async performActions(e){const t=this;while(t.actions.length){const o=t.actions.shift();if(console.log(o.type),"next"===o.type){t.proceed(o.next,e);break}if("saveInput"===o.type){if(!t.store.has("input")){e.unlockUserInput(),t.actions.unshift(o);break}t.store.set(o.varName,t.store.get("input")),t.store.delete("input")}else if("rephrase"===o.type){const e=le.assignVar(o.input,o.varNames,t.store),n=await re.serviceRephrase(e,3,o.maxWords,o.form);t.store.set(o.save,n);const a=le.assignVar(o.text,o.varNames,t.store);t.addTextNode(a);const s=[];t.addExtraButtonOptions(o.options,s),t.addButtonNode(s)}else if("options"===o.type){const e=[];t.addExtraButtonOptions(o.options,e),t.addButtonNode(e)}else if("publish"===o.type){let n=le.assignVar(o.text,o.varNames,t.store);e.addCanvasNode(n,o.varNames[0])}else if("writeFromSeed"===o.type){const e=le.assignVar(o.seed,o.varNames,t.store),n=await re.serviceWriteFromSeed(e,o.comp,o.concept,o.grade,o.maxWords,o.subject);t.addTextNode(n),o.save&&t.store.set(o.save,n),o.append&&t.store.set(o.append,t.store.get(o.append)+n)}else{if("listIdeasFromIdea"===o.type){const e=le.assignVar(o.idea,o.varNames,t.store),n=await re.serviceListIdeasFromIdea(e,o.term,o.desc,o.number),a=Object.values(JSON.parse(n))[0],s=[];a.forEach((function(e){s.push({text:e,on:!1,next:"",reply:"",save:o.save,append:o.append})})),o.options&&t.addExtraButtonOptions(o.options,s),t.addButtonNode(s);break}if("listStoryIdeas"===o.type){const e=le.assignVar(o.seed,o.varNames,t.store),n=await re.serviceListStoryIdeas(e,o.number,o.grade,o.maxWords),a=Object.values(JSON.parse(n))[0],s=[];a.forEach((function(e){s.push({text:e,on:!1,next:"",reply:"",save:o.save})})),o.options&&t.addExtraButtonOptions(o.options,s),t.addButtonNode(s);break}if("makeImage"===o.type){const n=le.assignVar(o.text,o.varNames,t.store),a=await re.serviceMakeImage(n);e.addImageNode(a)}else if("gradeWriting"===o.type){const e=le.assignVar(o.text,o.varNames,t.store),n=await re.serviceGradeWriting(e);t.addTextNode(n)}else if("removeVar"===o.type){const t=new Set;o.varNames.forEach((function(e){t.add(e)})),e.removeNodes(t)}else if("drawInfer"===o.type)e.addCanvasConnection(o.from,o.to);else if("exportConver"===o.type){let e="",o=t.conversation.length-1;while(o>0){const n=t.conversation[o];q.text===n.type&&(n.self?e+="<div>Me:<br/>{content}</div><br/>".replace("{content}",n.content[0]):e+="<div>Bot:<br/>{content}</div><br/>".replace("{content}",n.content[0])),o-=1}t.saveTextFile(e,"conversation.html")}else if("save"===o.type){let e="user: "+re.user+"\n\n";t.canvasNodes.forEach((function(t){e+=t.varName+"\n",e+=t.content+"\n\n"})),t.saveTextFile(e,"my_story.txt")}else if("copyVar"===o.type)t.store.set(o.to,t.store.get(o.from));else if("saveVar"===o.type){let e=o.text;o.varNames&&(e=le.assignVar(e,o.varNames,t.store)),t.store.set(o.varNames[0],e)}else if("freeImage"===o.type){const n=le.assignVar(o.text,o.varNames,t.store),a=await re.serviceFreeImage(n);e.addImageNode(a)}else if("freeChat"===o.type){e.unlockUserInput(),o.varNames&&o.conversation.forEach((function(e){e.content=le.assignVar(e.content,o.varNames,t.store)}));const n=t.store.get("input");if(n!==o.end){const a=await re.serviceChatMemory(n,o.conversation);t.addTextNode(a),o.append&&(t.store.has(o.append)||t.store.set(o.append,""),n&&(t.store.set(o.append,t.store.get(o.append)+"\n"+n),e.addCanvasNode(t.store.get(o.append),o.append)),t.store.set(o.append,t.store.get(o.append)+"\n"+a),e.addCanvasNode(t.store.get(o.append),o.append)),t.actions.unshift(o);break}}else if("complete"===o.type){const e=le.assignVar(o.userPrompt,o.varNames,t.store),n=await re.serviceComplete(e);o.postText&&t.addTextNode(n),o.save&&t.store.set(o.save,n),o.record&&(t.records.has(o.record)||t.records.set(o.record,[]),t.records.get(o.record).push(n))}else if("compare"===o.type){let e="";t.records.has(o.record)&&t.records.get(o.record).forEach((function(t){e+=t+"\n"})),e||(e="...");const n=t.store.get(o.userInput),a=await re.serviceCompareText(e,n),s=o.text.replace("{}",a);t.addTextNode(s)}else if("checkInput"===o.type){const n=t.store.get(o.varName);n===o.expect?t.proceed(o.positive,e):t.proceed(o.negative,e)}else alert("Unknown action: "+o.type)}}e.actionDone()},saveTextFile(e,t){const o=new Blob([e],{type:"text/plain;charset=utf-8"}),n=document.createElement("a");document.body.appendChild(n),n.style="display: none";const a=URL.createObjectURL(o);n.href=a,n.download=t,n.click(),URL.revokeObjectURL(a),n.remove()},addTextNode(e){this.conversation.unshift({content:[e],self:!1,type:q.text,nodeId:(0,Y.Z)()})},addButtonNode(e){this.conversation.unshift({content:e,self:!0,type:q.buttons,nodeId:(0,Y.Z)()})},addExtraButtonOptions(e,t){e.forEach((function(e){t.push({text:e.text,next:e.next,reply:e.reply,save:e.save,other:e.other})}))}},ue=o(876),pe={components:{[i.zx.name]:i.zx,[ue.Vq.name]:ue.Vq},setup(e,{emit:t}){const o=(0,F.iH)(!1),n=(0,F.iH)("");let a=null;const s=function(e){a=e,n.value=e.content,o.value=!0},r=function(){a.content=n.value,a.varName&&de.store.set(a.varName,n.value),o.value=!1,n.value||t("removeNode")};return{show:o,userText:n,confirm:r,showDialog:s}}};const me=(0,u.Z)(pe,[["render",ce]]);var he=me,ye=JSON.parse('{"name":"Simple Lesson for Writing a Stroy","sections":[{"id":"001","info":"Hello there, welcome to our Narrative Writing lesson today! Shall we start?","actions":[{"type":"options","options":[{"text":"Yes","reply":"Great, let\'s go!","next":"004"},{"text":"No","reply":"That\'s ok, let me know when you are ready!","next":"001","other":true}]}]},{"id":"004","info":"Alright, first, do you want to pick a genre? It may help narrowing down your writing.","actions":[{"type":"options","options":[{"text":"Sure","reply":"","next":"005"},{"text":"No thanks, I have an idea in mind","reply":"Alrighty then! Can you type your idea?","next":"009","other":true}]}]},{"id":"005","info":"Alright, pick a genre you want...","actions":[{"type":"options","options":[{"text":"Historical","reply":"","next":"006","save":"genre"},{"text":"Action","reply":"","next":"006","save":"genre"},{"text":"Fairy Tale","reply":"","next":"006","save":"genre"},{"text":"Horror","reply":"","next":"006","save":"genre"},{"text":"Comedy","reply":"","next":"006","save":"genre"},{"text":"Fantasy","reply":"","next":"006","save":"genre"}]}]},{"id":"006","info":"","actions":[{"type":"publish","text":"{genre}","varNames":["genre"]},{"type":"next","next":"007"}]},{"id":"007","info":"Now, can you think of an idea to write a story about based on {genre}?","varNames":["genre"],"actions":[{"type":"options","options":[{"text":"Yes","reply":"Great, can you type your idea?","next":"009"},{"text":"I need help","reply":"That\'s ok, here are some ideas for you...","next":"008","other":true}]}]},{"id":"008","info":"","actions":[{"type":"listStoryIdeas","seed":"{genre}","number":4,"grade":4,"maxWords":25,"save":"userIdea","varNames":["genre"],"options":[{"text":"I don\'t like any above","reply":"That’s ok, here are some more...","next":"008","other":true},{"text":"Nevermind, I\'ll write myself...","next":"009","other":true}]},{"type":"next","next":"010"}]},{"id":"009","info":"","actions":[{"type":"saveInput","varName":"idea"},{"type":"rephrase","text":"Cool, so your idea is about \'{userIdea}\', is that correct?","input":"{idea}","maxWords":10,"save":"userIdea","varNames":["idea","userIdea"],"options":[{"text":"Yes","reply":"That is a nice idea!","next":"010"},{"text":"No","reply":"That\'s ok, try to type your idea again","next":"009","other":true},{"text":"No, just keep my writing","next":"009c","other":true}]}]},{"id":"009c","info":"","actions":[{"type":"copyVar","from":"idea","to":"userIdea"},{"type":"next","next":"010"}]},{"id":"010","info":"","actions":[{"type":"publish","text":"{userIdea}","varNames":["userIdea"]},{"type":"next","next":"011"}]},{"id":"011","info":"Now, based on your idea, what or who is the main character in your story?","actions":[{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here are a few names you can use as for your main character:","next":"013","other":true}]},{"type":"saveInput","varName":"mainChar"},{"type":"next","next":"012"}]},{"id":"012","info":"","actions":[{"type":"publish","text":"{mainChar}","varNames":["mainChar"]},{"type":"next","next":"014"}]},{"id":"013","info":"","actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"names","desc":"main character","number":5,"save":"mainChar","varNames":["userIdea"]},{"type":"next","next":"012"}]},{"id":"014","info":"Can you give more description of your character? appearance age, gender, feeling (emotion), anything.","actions":[{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, let me help you.","next":"016","other":true}]},{"type":"saveInput","varName":"idea"},{"type":"rephrase","text":"Cool, so your character \'{mainChar}\' is \'{desc}\', is that correct?","input":"{idea}","maxWords":30,"form":"story character portrait","save":"desc","varNames":["mainChar","desc","idea"],"options":[{"text":"Yes","reply":"","next":"015"},{"text":"No","reply":"","next":"014","other":true}]}]},{"id":"015","info":"","actions":[{"type":"publish","text":"{desc}","varNames":["desc"]},{"type":"next","next":"018"}]},{"id":"016","info":"Ok, so, {mainChar} can feel...","varNames":["mainChar"],"actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"emotions","desc":"the feelings of the character","number":4,"save":"desc","varNames":["userIdea","mainChar"]},{"type":"next","next":"017"}]},{"id":"017","info":"And {mainChar} can look like...","varNames":["mainChar"],"actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"appearance","desc":"how the main character look like","number":4,"append":"desc","varNames":["userIdea"],"options":[{"text":"I don\'t like any above","reply":"That’s ok, here are some more...","next":"017","other":true},{"text":"Nevermind, I\'ll write myself...","next":"014","other":true}]},{"type":"publish","text":"{desc}","varNames":["desc"]},{"type":"next","next":"018"}]},{"id":"018","info":"Do you want to generate an image of your character?","actions":[{"type":"options","options":[{"text":"Yes","next":"019"},{"text":"No","next":"020","other":true}]}]},{"id":"019","info":"","actions":[{"type":"makeImage","text":"{userIdea}, {desc}","varNames":["userIdea","desc"]},{"type":"next","next":"019a"}]},{"id":"019a","info":"Cool, is there any image you like? Just drag it to your canvas! Or, you can change the \\"desc\\" part and then click \\"No\\" to make updated images!","actions":[{"type":"options","options":[{"text":"Yes","next":"020"},{"text":"No","reply":"Hang on, here we go again...","next":"019","other":true}]}]},{"id":"020","info":"Where does the story take place?","actions":[{"type":"options","options":[{"text":"I need help","next":"021","other":true}]},{"type":"saveInput","varName":"place"},{"type":"publish","text":"{place}","varNames":["place"]},{"type":"next","next":"022"}]},{"id":"021","info":"","actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"places","desc":"where the story can take place","number":4,"save":"place","varNames":["userIdea"]},{"type":"publish","text":"{place}","varNames":["place"]},{"type":"next","next":"022"}]},{"id":"022","info":"What do the main characters want to do?","actions":[{"type":"options","options":[{"text":"I need help","next":"023","other":true}]},{"type":"saveInput","varName":"mainObjective"},{"type":"publish","text":"{mainObjective}","varNames":["mainObjective"]},{"type":"next","next":"025"}]},{"id":"023","info":"","actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}, {desc}","term":"actions","desc":"what the main character in the story wants to do","number":4,"save":"mainObjective","varNames":["userIdea","desc"]},{"type":"publish","text":"{mainObjective}","varNames":["mainObjective"]},{"type":"next","next":"025"}]},{"id":"025","info":"Great, let\'s write an introduction of story based on \'{userIdea}\' within 50 words.","varNames":["userIdea"],"actions":[{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here is an example introduction for your story...","next":"026","other":true}]},{"type":"saveInput","varName":"introduction"},{"type":"next","next":"028"}]},{"id":"026","info":"Please wait... I am trying... ^_^ And please note, you can always edit the writing on the canvas!","actions":[{"type":"writeFromSeed","seed":"{userIdea}. The main character is {mainChar}, and {desc}, and {mainObjective}. This story happens at {place}","comp":"exposition","concept":"story","grade":4,"maxWords":50,"subject":"creative writing","varNames":["userIdea","mainChar","desc","place","mainObjective"],"save":"introduction"},{"type":"next","next":"027"}]},{"id":"027","info":"Do you like it?","actions":[{"type":"options","options":[{"text":"Yes","reply":"","next":"028"},{"text":"No","reply":"No problem, here is another one... (injection?)","next":"026","other":true},{"text":"Nevermind, I\'ll write myself...","next":"025","other":true}]}]},{"id":"028","info":"Do you want to create an image for your Story Introduction Scene?","actions":[{"type":"options","options":[{"text":"Yes","reply":"","next":"028a"},{"text":"No","reply":"","next":"028b","other":true}]}]},{"id":"028a","info":"Alright! Now, try to enter a descriptive text to the desired image, this is a testing feature, you can type whatever you want.","actions":[{"type":"saveInput","varName":"freeImage"},{"type":"freeImage","text":"{freeImage}","varNames":["freeImage"]},{"type":"next","next":"028b"}]},{"id":"028b","info":"Cool, now you have the introduction of your story, next, what is the major problem in this story?","actions":[{"type":"publish","text":"{introduction}","varNames":["introduction"]},{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here is an example problem for your story...","next":"029","other":true}]},{"type":"saveInput","varName":"conflict"},{"type":"next","next":"031"}]},{"id":"029","info":"Based on your \'introduction\', the problem of your story could be something like this...","actions":[{"type":"writeFromSeed","seed":"{introduction}","comp":"conflict","concept":"story","grade":4,"maxWords":50,"subject":"creative writing","varNames":["introduction"],"save":"conflict"},{"type":"next","next":"030"}]},{"id":"030","info":"Do you like it?","actions":[{"type":"options","options":[{"text":"Yes","reply":"","next":"031"},{"text":"No","reply":"No problem, here is another one...","next":"029","other":true}]}]},{"id":"031","info":"Wow, the conflict seems intense, next, what is the climax in this story?","actions":[{"type":"publish","text":"{conflict}","varNames":["conflict"]},{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here is an example climax for your story...","next":"032","other":true}]},{"type":"saveInput","varName":"climax"},{"type":"next","next":"034"}]},{"id":"032","info":"The climax of your story could be something like this...","actions":[{"type":"writeFromSeed","seed":"{userIdea} {conflict}","comp":"climax","concept":"story","grade":4,"maxWords":100,"subject":"creative writing","varNames":["conflict","userIdea"],"save":"climax"},{"type":"next","next":"033"}]},{"id":"033","info":"Do you like it?","actions":[{"type":"options","options":[{"text":"Yes","reply":"","next":"034"},{"text":"No","reply":"No problem, here is another one...","next":"032","other":true}]}]},{"id":"034","info":"Alright! That is breathtaking! Now, what will be the ending for your story?","actions":[{"type":"publish","text":"{climax}","varNames":["climax"]},{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here is an example ending for your story...","next":"035","other":true}]},{"type":"saveInput","varName":"ending"},{"type":"next","next":"900"}]},{"id":"035","info":"","actions":[{"type":"writeFromSeed","seed":"{userIdea} {climax}","comp":"ending","concept":"story","grade":4,"maxWords":50,"subject":"creative writing","varNames":["climax","userIdea"],"save":"ending"},{"type":"next","next":"036"}]},{"id":"036","info":"Do you like it?","actions":[{"type":"options","options":[{"text":"Yes","reply":"","next":"900"},{"text":"No","reply":"No problem, here is another one...","next":"035","other":true}]}]},{"id":"900","info":"Cool, would you like us to provide some feedback on your writing? (this is a testing feature)","actions":[{"type":"publish","text":"{ending}","varNames":["ending"]},{"type":"options","options":[{"text":"Yes","reply":"","next":"901"},{"text":"No","reply":"","next":"999","other":true}]}]},{"id":"901","info":"","actions":[{"type":"gradeWriting","text":"{introduction}\\n{conflict}\\n{climax}\\n{ending}","varNames":["introduction","conflict","climax","ending"]},{"type":"next","next":"999"}]},{"id":"999","info":"Alright! We know you wanted to polish your story, but since this is a demo of our learning system, we have to end here, see you next time with more exciting features!","actions":[{"type":"options","options":[{"text":"Save entire conversation","reply":"","next":"902"},{"text":"Save your story","reply":"","next":"903"}]}]},{"id":"902","actions":[{"type":"exportConver"},{"type":"next","next":"999"}]},{"id":"903","actions":[{"type":"save"},{"type":"next","next":"999"}]}]}'),ve=JSON.parse('{"name":"Simple Lesson for Argumentative Writing","sections":[{"id":"001","info":"Welcome, writing arguments is so much fun! If you think \\"to argue\\" only means \\"to fight,\\" I am going to have to disagree with you! When you write an \\"argument\\" it means that you are trying to prove a point clearly. Arguments try to persuade, or convince, a reader. Being able to argue well is an important skill, and a fun one.","actions":[{"type":"next","next":"002"}]},{"id":"002","info":"Do you already have a topic idea in mind?","actions":[{"type":"options","options":[{"text":"Yes","reply":"Great, what do you want to write about?","next":"003"},{"text":"No","reply":"Not a problem! Here are some topics we can start today, pick any of the following options!","next":"004","other":true}]}]},{"id":"003","info":"","actions":[{"type":"saveInput","varName":"topic"},{"type":"rephrase","text":"Cool, so your idea is about \'{userTopic}\', is that correct?","input":"{topic}","form":"Argumentative Writing Title","maxWords":10,"save":"userTopic","varNames":["topic","userTopic"],"options":[{"text":"Yes","reply":"That is a nice idea!","next":"005"},{"text":"No","reply":"That\'s ok, try to type your idea again","next":"003","other":true},{"text":"No, just keep my writing","next":"005","other":true}]}]},{"id":"004","info":"Not a problem! Here are some topics we can start today, pick any of the following options!","actions":[{"type":"options","options":[{"text":"School Uniforms: For or Against?","next":"005","save":"userTopic"},{"text":"Homework: Helpful or Harmful?","next":"005","save":"userTopic"},{"text":"Should Animals Be Kept in Zoos?","next":"005","save":"userTopic"}]}]},{"id":"005","info":"Excellent choice! Now you have your topic in mind, so what is your stance on this topic? Are you for or against this topic \'{userTopic}\'","varNames":["userTopic"],"actions":[{"type":"publish","text":"{userTopic}","varNames":["userTopic"]},{"type":"next","next":"005a"}]},{"id":"005a","info":"","actions":[{"type":"options","options":[{"text":"I support it!","reply":"","save":"userPosition","next":"005b"},{"text":"I don\'t agree with it.","reply":"","save":"userPosition","next":"005b"},{"text":"I need help","next":"006","other":true}]}]},{"id":"005b","info":"","actions":[{"type":"complete","userPrompt":"Sum up my stance in one sentence based on the following text \'{userTopic} {userPosition}\'. Your reply should be as first person.","varNames":["userTopic","userPosition"],"save":"My Stance","postText":false},{"type":"next","next":"007"}]},{"id":"006","info":"No problem, let me give you a hint...","actions":[{"type":"writeFromSeed","seed":"{userTopic}","comp":"very short guidance with only positive and negative example argument","concept":"helping me to decide my stance on the topic","grade":4,"maxWords":30,"subject":"argumentative writing","varNames":["userTopic"]},{"type":"next","next":"005a"}]},{"id":"007","info":"Cool, now you have your stance on this issue, let’s start writing an introduction, write about the topic that you are going to write and state your opinion (on the right-hand side canvas). When you finish, you can click \'I\'m done\', if you need help, I think you know which button to click ^_^.","actions":[{"type":"publish","text":"{My Stance}","varNames":["My Stance"]},{"type":"saveVar","text":"click here to write...","varNames":["Introduction"]},{"type":"publish","text":"{Introduction}","varNames":["Introduction"]},{"type":"next","next":"008"}]},{"id":"008","info":"","actions":[{"type":"options","options":[{"text":"I\'m done my Introduction","reply":"","next":"011"},{"text":"Check my writing","reply":"","next":"009"},{"text":"I need help","reply":"","next":"010","other":true}]}]},{"id":"009","info":"Alright, let\'s see...","actions":[{"type":"complete","userPrompt":"Check this piece of writing \'{Introduction}\'. Tell me if it has any grammatical error. Only explain the error to me and show me how to fix them. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Introduction"],"postText":true},{"type":"complete","userPrompt":"Check this piece of writing \'{Introduction}\'. Tell me if it clearly stated a point of view as in an introduction of argumentative writing. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Introduction"],"postText":true},{"type":"compare","record":"introRecord","userInput":"Introduction","text":"Your writing similarity is {}% (0% - dissimilar, 100% - similar, lower is better)"},{"type":"next","next":"008"}]},{"id":"010","info":"Of course, here is a sample intro you can take a look at.","actions":[{"type":"complete","userPrompt":"Write an introduction based on my argumentative perspective \'{My Stance}\'. This introduction should set the context by reviewing the topic in a general way. Explain why readers should care about the issue. Lastly, this introduction should present my thesis statement. Your reply should not exceed 50 words.","varNames":["My Stance"],"postText":true,"record":"introRecord"},{"type":"next","next":"008"}]},{"id":"011","info":"Excellent! Now that you have provided your point of view (Introduction), let\'s think about how you explain the reason why you think \\"{My Stance}\\". Can you provide first evidence about your stance? Evidence includes the reasons and examples!","varNames":["My Stance"],"actions":[{"type":"saveVar","text":"click here to write...","varNames":["Body - First Evidence"]},{"type":"publish","text":"{Body - First Evidence}","varNames":["Body - First Evidence"]},{"type":"next","next":"012"}]},{"id":"012","info":"","actions":[{"type":"options","options":[{"text":"I\'m done my First Evidence","reply":"","next":"013"},{"text":"Check my writing","reply":"","next":"check_e1"},{"text":"I need help","reply":"","next":"help_e1","other":true}]}]},{"id":"check_e1","info":"Alright, let\'s see...","actions":[{"type":"complete","userPrompt":"Check this piece of writing \'{Body - First Evidence}\'. Tell me if it has any grammatical error. Only explain the error to me and show me how to fix them. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Body - First Evidence"],"postText":true},{"type":"complete","userPrompt":"Check this piece of writing \'{Body - First Evidence}\'. Tell me if it clearly stated a reason and an example as an evidence of argumentative writing. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Body - First Evidence"],"postText":true},{"type":"compare","record":"body01","userInput":"Body - First Evidence","text":"Your writing similarity is {}% (0% - dissimilar, 100% - similar, lower is better)"},{"type":"next","next":"012"}]},{"id":"help_e1","info":"Of course, here is a sample you can take a look at.","actions":[{"type":"complete","userPrompt":"Write one paragraph of evidential support based on the introduction of my argumentative writing, \'{Introduction}\'. This paragraph must have some logical connection to the thesis statement in the introduction. The evidence should be either factual, logical, statistical, or anecdotal. Your reply should not exceed 80 words.","varNames":["Introduction"],"postText":true,"record":"body01"},{"type":"next","next":"012"}]},{"id":"013","info":"","actions":[{"type":"complete","userPrompt":"Based on this text \\"{Body - First Evidence}\\", sum up into two sentence to state my reason and example that support my stance on \\"{My Stance}\\". Your reply should be as first person, and not exceed 30 words.","varNames":["Body - First Evidence","My Stance"],"save":"firstEvidenceSum"},{"type":"next","next":"014"}]},{"id":"014","info":"Excellent! Now provide one additional evidence about your stance \\"{My Stance}\\". Evidence includes the reasons and examples!","varNames":["My Stance"],"actions":[{"type":"saveVar","text":"click here to write...","varNames":["Body - Second Evidence"]},{"type":"publish","text":"{Body - Second Evidence}","varNames":["Body - Second Evidence"]},{"type":"next","next":"015"}]},{"id":"015","info":"","actions":[{"type":"options","options":[{"text":"I\'m done my Second Evidence","reply":"","next":"016"},{"text":"Check my writing","reply":"","next":"check_e2"},{"text":"I need help","reply":"","next":"help_e2","other":true}]}]},{"id":"check_e2","info":"Alright, let\'s see...","actions":[{"type":"complete","userPrompt":"Check this piece of writing \'{Body - Second Evidence}\'. Tell me if it has any grammatical error. Only explain the error to me and show me how to fix them. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Body - Second Evidence"],"postText":true},{"type":"complete","userPrompt":"Check this piece of writing \'{Body - Second Evidence}\'. Tell me if it clearly stated a reason and an example as an evidence of argumentative writing. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Body - Second Evidence"],"postText":true},{"type":"compare","record":"body02","userInput":"Body - Second Evidence","text":"Your writing similarity is {}% (0% - dissimilar, 100% - similar, lower is better)"},{"type":"next","next":"015"}]},{"id":"help_e2","info":"","actions":[{"type":"complete","userPrompt":"Based on this introduction of my argumentative writing, \\"{Introduction}\\". Write another paragraph of evidential support. This paragraph must have some logical connection to the thesis statement in the introduction. You reply should be different from my first evidence of \\"{firstEvidenceSum}\\". The evidence should be either factual, logical, statistical, or anecdotal. Your reply should not exceed 80 words.","varNames":["firstEvidenceSum","Introduction"],"postText":true,"record":"body02"},{"type":"next","next":"015"}]},{"id":"016","info":"Excellent, now let\'s write a conclusion! You can restate your argument and summarize why it is important. Remember, you don\'t want to use the same words you did when you started your argument, but you want to include the same, or similar, ideas, just in different and interesting words.","actions":[{"type":"saveVar","text":"click here to write...","varNames":["Conclusion"]},{"type":"publish","text":"{Conclusion}","varNames":["Conclusion"]},{"type":"next","next":"017"}]},{"id":"017","info":"","actions":[{"type":"complete","userPrompt":"Based on this text \\"{Body - Second Evidence}\\", sum up into two sentence to state my reason and example that support my stance on \\"{My Stance}\\". Your reply should be as first person, and not exceed 30 words.","varNames":["Body - Second Evidence","My Stance"],"save":"secondEvidenceSum"},{"type":"next","next":"018"}]},{"id":"018","info":"","actions":[{"type":"options","options":[{"text":"I\'m done my Conclusion","reply":"","next":"end"},{"text":"Check my writing","reply":"","next":"check_con"},{"text":"I need help","reply":"","next":"help_con","other":true}]}]},{"id":"check_con","info":"Alright, let\'s see...","actions":[{"type":"complete","userPrompt":"Check this piece of writing \'{Conclusion}\'. Tell me if it has any grammatical error. Only explain the error to me and show me how to fix them. Talk to me as a second person. Your reply should not exceed 50 words.","varNames":["Conclusion"],"postText":true},{"type":"next","next":"018"}]},{"id":"help_con","info":"","actions":[{"type":"complete","userPrompt":"Based on these introduction and summarized evidences of my argumentative writing, \\"{Introduction} {firstEvidenceSum} {secondEvidenceSum}\\". Write a conclusion for my essay. This conclusion should not introduce any new information, but should restate why the topic is important, review the main points, and review my thesis. Your reply should not exceed 50 words.","varNames":["firstEvidenceSum","secondEvidenceSum","Introduction"],"postText":true},{"type":"next","next":"018"}]},{"id":"end","info":"Excellent! You did a great job 🙂. What a beautify essay you got there! Don\'t forget to show it to your parents or friends!","actions":[{"type":"options","options":[{"text":"Save entire conversation","reply":"","next":"902"},{"text":"Save your Essay","reply":"","next":"903"}]}]},{"id":"902","actions":[{"type":"exportConver"},{"type":"next","next":"end"}]},{"id":"903","actions":[{"type":"save"},{"type":"next","next":"end"}]}]}'),xe=JSON.parse('{"name":"Game: Once Upon a Time","sections":[{"id":"001","info":"Welcome to our game! In this game, one child starts the story with a sentence like, \\"Once upon a time, there was a dragon who loved to dance.\\" Each student takes turns adding a sentence, and the goal is to build a collaborative story. Type \\"end\\" if you want to end this this game.","actions":[{"type":"options","options":[{"text":"I will go first.","next":"002","save":"whoFirst"},{"text":"You can go first.","next":"002","save":"whoFirst"}]}]},{"id":"002","info":"","actions":[{"type":"freeChat","end":"end","append":"story","conversation":[{"role":"system","content":"You are a language robot that plays language games with kids, I will instruct you the game rules in the beginning of the conversation, you will then only reply what the game rules allow you to, do not reply anything else."},{"role":"user","content":"play a game of \'Once Upon a Time\' with me. The rules are, you and I each take turn to write a sentence, except the first sentence the rest of sentences must be coherent to the previous sentence to order to form a collaborative story all together."},{"role":"assistant","content":"Understood! I will follow your lead and write one sentence at a time. Please start the story with your first sentence, or let me know if I should start the first sentence."},{"role":"user","content":"{whoFirst}"}],"varNames":["whoFirst"]},{"type":"next","next":"003"}]},{"id":"003","info":"","actions":[{"type":"writeFromSeed","seed":"{story}","comp":"one ending sentence","concept":"the story","grade":4,"maxWords":30,"subject":"storytelling","varNames":["story"],"append":"story"},{"type":"next","next":"004"}]},{"id":"004","info":"That was a very interesting story, it\'s been a lot of fun, see you next time!","actions":[{"type":"publish","text":"{story}","varNames":["story"]}]}]}'),fe=JSON.parse('{"name":"Simple Lesson for Argumentative Writing","sections":[{"id":"001","info":"Hello, if you can answer the questions below correctly, then I\'ll tell your Dad that you can play more iPad! How that sounds?","actions":[{"type":"options","options":[{"text":"Sure, let\'s go!","next":"002"},{"text":"I am tired and not good at Math","next":"001","other":true}]}]},{"id":"002","info":"Cool! Can you write the correct answer for the question of \'352 - 168 = ?\'","actions":[{"type":"saveInput","varName":"q1"},{"type":"checkInput","varName":"q1","expect":"184","positive":"003","negative":"004"}]},{"id":"003","info":"That is correct! You are so smart!","actions":[]},{"id":"004","info":"Oh no! That is so close. But that\'s ok, let me show you how to get the answer correctly...","actions":[{"type":"complete","userPrompt":"Explain to me how to calculate the substraction of \'352 - 168 = 184\' within minimum steps by plain words and regrouping, do not show vertical formula. Talk to me as a 4-grade student as a second person. Your reply must not exceed 100 words.","varNames":[],"postText":true}]}]}'),ge={name:"StudyView",components:{MyNode:$,MyButtons:se,MyDialog:he,[i.zx.name]:i.zx,[H.Ee.name]:H.Ee,[P.gN.name]:P.gN,[A.TS.name]:A.TS},setup(){const e=(0,l.yj)(),t=(0,Y.Z)();console.log(t);const o=(0,F.iH)(""),n=(0,F.iH)([]),s=(0,F.iH)(!0),r=(0,F.iH)(null),i=(0,F.iH)([]),c=new Map,d=(0,F.iH)(null);re.api=new V.ZP({apiKey:q.k2+q.k1+q.k3,dangerouslyAllowBrowser:!0}),re.ninja=q.n3+q.n2+q.n1,re.user=t;const u=(0,F.iH)(1200),p=(0,F.iH)([]),m=function(e){p.value.splice(e,1)},h={removeNode(){n.value[0]&&n.value[0].type===q.buttons&&n.value.shift(),s.value=!0},unlockUserInput(){s.value=!1},addImageNode(e){n.value.unshift({content:e,self:!1,type:q.image})},addCanvasNode(e,t){if(c.has(t)){const o=c.get(t);return void(o.content=e)}let o=100,n=20;i.value.length&&(o=i.value[i.value.length-1].x,n=i.value[i.value.length-1].y,n+=i.value[i.value.length-1].h);const a={id:(0,Y.Z)(),content:e,x:o,y:n,type:q.text,class:"text-blue-500 text-lg",varName:t,w:400,h:80,connStart:[],connEnd:[]};i.value.push(a),c.set(t,a)},addCanvasConnection(e,t){e.forEach((function(e){t.forEach((function(t){const o=c.get(e),n=c.get(t);if(o&&n){const e=20*n.connEnd.length,t={sx:o.x+50,sy:o.y+30,ex:n.x+e+10,ey:n.y,endOffset:e};p.value.push(t),o.connStart.push(t),n.connEnd.push(t)}}))}))},removeNodes(e){let t=i.value.length-1;while(t>=0)e.has(i.value[t].varName)&&i.value.splice(t,1),t-=1},actionDone(){setTimeout((function(){"study"===e.name&&r.value.scrollIntoView({behavior:"smooth",block:"end"})}),500)}};(0,a.bv)((function(){let t=null;"c0df43a7-e526-433d-8332-0714acab2b70"===e.params.lessonId?t=ye:"5bb890dd-b82b-4f09-9acc-2fc388c8a7d8"===e.params.lessonId?t=ve:"bf09ac4d-cc41-4dfd-b9ef-c637e05ceeab"===e.params.lessonId?t=xe:"47943d12-cf42-47a4-aa6f-3b7fe8c12646"===e.params.lessonId&&(t=fe),t?(de.reset(t.sections,i.value,c,n.value),de.proceed("001",h)):window.location.href="/"}));const y=async function(e){if(!e.done){if(e.on=!0,e.done=!0,n.value.shift(),n.value.unshift({content:[e.text],self:!0,type:q.text}),e.reply&&n.value.unshift({content:[e.reply],self:!1,type:q.text}),i.value.length&&e.cancel&&i.value.pop(),e.save&&de.store.set(e.save,e.text),e.append){const t=de.store.get(e.append);t?de.store.set(e.append,t+", "+e.text):de.store.set(e.append,e.text)}e.next?de.proceed(e.next,h):await de.performActions(h)}},v=async function(){if(!o.value)return;const e=o.value;o.value="",s.value?alert("We are not anticipating input text now..."):(de.store.set("input",e),n.value[0]&&n.value[0].type===q.buttons&&n.value.shift(),n.value.unshift({content:[e],self:!0,type:q.text}),s.value=!0,await de.performActions(h))},x=new(L())({bitRate:128}),f=(0,F.iH)(!1),g=async function(){f.value=!0,await x.start()},w=async function(){f.value=!1;const[e,t]=await x.stop().getMp3(),n=new File(e,"my_speech.mp3",{type:t.type,lastModified:Date.now()}),a=await re.api.audio.transcriptions.create({model:"whisper-1",file:n,temperature:.1});console.log(a),(0,U.CF)({message:a.text,duration:5e3}),o.value=await re.serviceTranslate(a.text)};let b=null;const N=function(e,t){let o=0,n=0;t===q.text?(o=400,n=80):t===q.image&&(o=200,n=200),b={id:(0,Y.Z)(),content:e,class:"",type:t,w:o,h:n,connStart:[],connEnd:[]}},k=function(e){e.preventDefault()},I=function(e){if(e.preventDefault(),b){const t=e.target.getBoundingClientRect();b.x=e.clientX-t.left,b.y=e.clientY-t.top,i.value.push(b),b=null}};let T=null;const C=function(e){T=e},S=function({x:e,y:t,tw:o},n){n.x=e,n.y=t,n.connStart.forEach((function(n){n.sx=e+o+10,n.sy=t+30})),n.connEnd.forEach((function(o){o.ex=e+o.endOffset+10,o.ey=t})),n.y+n.h>=u.value&&(u.value=n.y+n.h+20)};let _=0,D=0;const E=function(e){T&&(e.preventDefault(),T(e.x-_,e.y-D)),_=e.x,D=e.y},O=function(){T=null};let W=0;const j=function(e,t){d.value.showDialog(e),W=t},B=function(){i.value.splice(W,1),(0,U.CF)("Text removed")},M=function({h:e},t){t.h=e,t.y+t.h>=u.value&&(u.value=t.y+t.h+20)};return{NodeTypes:q,chatToSend:o,history:n,sending:s,startDrag:N,onDragover:k,onDrop:I,canvasNodes:i,onNodeMouseDown:C,mosemove:E,mouseup:O,pickOption:y,enterText:v,clickCanvasNode:j,chatBottom:r,newPosition:S,editor:d,removeCanvasNode:B,connections:p,removeLine:m,startRecording:g,stopRecording:w,recording:f,canvasHeight:u,updateSize:M}}};const we=(0,u.Z)(ge,[["render",M],["__scopeId","data-v-4c84bd5c"]]);var be=we;const Ne=e=>((0,a.dD)("data-v-17723366"),e=e(),(0,a.Cn)(),e),ke={xmlns:"http://www.w3.org/2000/svg",version:"1.1",class:"w-full h-full canvas"},Ie=Ne((()=>(0,a._)("svg",{x:"500",y:"0",width:"200",height:"100"},[(0,a._)("text",{x:"100",y:"100",class:"heavy"},"v0.906")],-1))),Te=[Ie];function Ce(e,t,o,n,s,r){return(0,a.wg)(),(0,a.iD)("svg",ke,Te)}var Se={name:"AboutView",setup(){}};const _e=(0,u.Z)(Se,[["render",Ce],["__scopeId","data-v-17723366"]]);var De=_e;const Ee=e=>((0,a.dD)("data-v-0a63f174"),e=e(),(0,a.Cn)(),e),Oe={class:"theme-color"},We=Ee((()=>(0,a._)("div",{class:"text-4xl text-center py-10"},"Pick a lesson to learn",-1))),je={class:"flex flex-row flex-wrap"},Be={class:"text-xl"},Me={class:"py-2"};function Ye(e,t,o,n,s,r){const i=(0,a.up)("van-button"),c=(0,a.up)("van-card");return(0,a.wg)(),(0,a.iD)("div",Oe,[We,(0,a._)("div",je,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.lessons,((e,t)=>((0,a.wg)(),(0,a.j4)(c,{key:t,thumb:e.cover,class:"w-[calc(33%-20px)] m-2 shadow-md rounded-xl"},{title:(0,a.w5)((()=>[(0,a._)("div",Be,(0,h.zw)(e.name),1)])),desc:(0,a.w5)((()=>[(0,a._)("div",null,(0,h.zw)(e.info),1)])),num:(0,a.w5)((()=>[(0,a._)("div",Me,(0,h.zw)(e.author),1)])),footer:(0,a.w5)((()=>[(0,a.Wm)(i,{size:"small",type:"primary",onClick:t=>n.goLearn(e)},{default:(0,a.w5)((()=>[(0,a.Uk)("Learn")])),_:2},1032,["onClick"])])),price:(0,a.w5)((()=>[(0,a.Uk)(" Grades: "+(0,h.zw)(e.gradeMin)+" - "+(0,h.zw)(e.gradeMax),1)])),_:2},1032,["thumb"])))),128))])])}var Fe=o(337),He={name:"ListView",components:{[i.zx.name]:i.zx,[Fe.Zb.name]:Fe.Zb},setup(){const e=(0,l.tv)(),t=(0,F.iH)([{name:"Narrative Writing 01",info:"This is our first demo lesson to guide you through a fun creative writing process!",cover:"images/test4.png",file:"lesson.json",author:"Teacher Miss A.",id:"c0df43a7-e526-433d-8332-0714acab2b70",gradeMin:3,gradeMax:12},{name:"Argumentative Writing 01",info:"A simple demo lesson to help you make argumentative writing.",cover:"images/test5.jpg",file:"lesson2.json",author:"Teacher Mr B.",id:"5bb890dd-b82b-4f09-9acc-2fc388c8a7d8",gradeMin:4,gradeMax:10},{name:"Once Upon a Time",info:"An interactive storytelling game.",cover:"images/test6.jpg",file:"lesson3.json",author:"StoryAI",id:"bf09ac4d-cc41-4dfd-b9ef-c637e05ceeab",gradeMin:4,gradeMax:99}]),o=function(t){e.push("/study/"+t.id)};return{lessons:t,goLearn:o}}};const Pe=(0,u.Z)(He,[["render",Ye],["__scopeId","data-v-0a63f174"]]);var Ae=Pe;const Ue=[{path:"/",name:"home",component:Ae},{path:"/study/:lessonId",name:"study",component:be},{path:"/about",name:"about",component:De}],Ve=(0,l.p7)({history:(0,l.r5)(),routes:Ue});var ze=Ve,Le=o(522),qe=(0,Le.MT)({state:{lessonData:null},mutations:{setLesson(e,t){e.lessonData=t}}}),Re=(o(758),o(110),o(192)),Ze=o(182);Re.go.use("en-US",Ze.Z),(0,n.ri)(m).use(qe).use(ze).mount("#app")}},t={};function o(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,n,a,s){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],a=e[d][1],s=e[d][2];for(var i=!0,c=0;c<n.length;c++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(i=!1,s<r&&(r=s));if(i){e.splice(d--,1);var l=a();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,a,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,s,r=n[0],i=n[1],c=n[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(c)var d=c(o)}for(t&&t(n);l<r.length;l++)s=r[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},n=self["webpackChunkvital"]=self["webpackChunkvital"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(92)}));n=o.O(n)})();
//# sourceMappingURL=app.78b89ba3.js.map