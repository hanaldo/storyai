(function(){"use strict";var e={7854:function(e,t,n){var o=n(9963),a=n(6252);function r(e,t,n,o,r,s){const i=(0,a.up)("v-spacer"),c=(0,a.up)("router-link"),u=(0,a.up)("v-btn"),l=(0,a.up)("v-app-bar"),d=(0,a.up)("router-view"),p=(0,a.up)("v-main"),m=(0,a.up)("v-app"),y=(0,a.up)("widget-container-modal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{color:"#e0e9f5"},{default:(0,a.w5)((()=>[(0,a.Wm)(i),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{to:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{to:"/about"},{default:(0,a.w5)((()=>[(0,a.Uk)("About")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1})])),_:1}),(0,a.Wm)(y)],64)}var s=n(9593),i={components:{WidgetContainerModal:s.nC}},c=n(3744);const u=(0,c.Z)(i,[["render",r]]);var l=u,d=n(2201),p=n(3577);const m={class:"flex flex-col items-center justify-end h-full p-4"},y={class:"w-full h-5/6 overflow-scroll flex flex-col-reverse"},f={ref:"chatBottom"},h={class:"mx-4 p-4 bg-white rounded-lg"},v={key:0},g=["innerHTML","onDragstart"],x={key:1,class:"flex gap-4"},w={key:2},b={class:"w-full flex flex-col items-center"};function k(e,t,n,r,s,i){const c=(0,a.up)("v-avatar"),u=(0,a.up)("v-img"),l=(0,a.up)("my-buttons"),d=(0,a.up)("v-text-field"),k=(0,a.up)("v-btn"),I=(0,a.up)("v-sheet"),N=(0,a.up)("v-col"),C=(0,a.up)("my-node"),D=(0,a.up)("v-row");return(0,a.wg)(),(0,a.j4)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(N,{cols:"12",sm:"5"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{class:"ml-8 my-4",rounded:"lg",height:"90vh",color:"#e0e9f5",onDragover:r.onDragover},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a._)("div",y,[(0,a._)("div",f,null,512),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.history,(e=>((0,a.wg)(),(0,a.iD)("div",{class:(0,p.C_)(["flex items-start py-2 mb-8",{"flex-row-reverse":e.self}]),key:e.nodeId},[e.self?((0,a.wg)(),(0,a.j4)(c,{key:0,class:"border",image:"images/test_me.png"})):((0,a.wg)(),(0,a.j4)(c,{key:1,class:"border",image:"images/test_ai.png"})),(0,a._)("div",h,[(0,a._)("div",{class:(0,p.C_)(["cursor-move",{"text-right":e.self}])},[e.type===r.NodeTypes.text?((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("span",{innerHTML:e.content[0],draggable:"true",onDragstart:t=>r.startDrag(e.content[0],e.type)},null,40,g)])):(0,a.kq)("",!0),e.type===r.NodeTypes.image?((0,a.wg)(),(0,a.iD)("div",x,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.content,((t,n)=>((0,a.wg)(),(0,a.j4)(u,{key:n,width:150,"aspect-ratio":"4/3",cover:"",src:t,draggable:"true",onDragstart:n=>r.startDrag(t,e.type)},null,8,["src","onDragstart"])))),128))])):(0,a.kq)("",!0),e.type===r.NodeTypes.buttons?((0,a.wg)(),(0,a.iD)("div",w,[(0,a.Wm)(l,{content:e.content,onButtonClicked:r.pickOption},null,8,["content","onButtonClicked"])])):(0,a.kq)("",!0)],2)])],2)))),128))]),(0,a._)("div",b,[(0,a.Wm)(d,{class:"w-full",modelValue:r.chatToSend,"onUpdate:modelValue":t[0]||(t[0]=e=>r.chatToSend=e),label:"Chat to AI",clearable:"",onKeyup:t[1]||(t[1]=(0,o.D2)((e=>r.test2()),["enter"]))},null,8,["modelValue"]),(0,a.Wm)(k,{class:"bg-zinc-100 my-2",block:"",disabled:r.sending,loading:r.sending,onClick:t[2]||(t[2]=e=>r.test2())},{default:(0,a.w5)((()=>[(0,a.Uk)(" Send ")])),_:1},8,["disabled","loading"])])])])),_:1},8,["onDragover"])])),_:1}),(0,a.Wm)(N,{cols:"12",sm:"7"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{class:"mr-8 my-4",height:"90vh",rounded:"lg",color:"#e0e9f5",onDragover:r.onDragover,onDrop:r.onDrop},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",class:"w-full h-full canvas",onMousemove:t[3]||(t[3]=(...e)=>r.mosemove&&r.mosemove(...e)),onMouseup:t[4]||(t[4]=(...e)=>r.mouseup&&r.mouseup(...e))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.textNodes,((e,t)=>((0,a.wg)(),(0,a.j4)(C,{key:t,node:e,"on-mouse-down":r.onNodeMouseDown,onOnNodeClicked:t=>r.clickCanvasNode(e)},null,8,["node","on-mouse-down","onOnNodeClicked"])))),128))],32))])),_:1},8,["onDragover","onDrop"])])),_:1})])),_:1})}var I=n(7632),N=n(2262),C=n(6485),D={image:"img",text:"txt",buttons:"btn",k1:"QjxMZlnPT3BlbkFJ9oD5Q",k2:"sk-KhuyUzxadKXP",k3:"sPpdGrS3TL7QiPE"},T={checkIntention:{text:'Classify my input into two categories, either "story" or "image". Reply with only one word. My input is "@in@".',input:"@in@",expectations:["story","image"]}};const O=["x","y","width","height"],_=["width","height"],S=["width","src"];function W(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("svg",{x:o.x,y:o.y,width:o.w,height:o.h,onMousedown:t[0]||(t[0]=(...e)=>o.mousedown&&o.mousedown(...e)),class:"cursor-pointer",onMouseenter:t[1]||(t[1]=(...e)=>o.mouseenter&&o.mouseenter(...e)),onMouseleave:t[2]||(t[2]=(...e)=>o.mouseleave&&o.mouseleave(...e)),onMouseup:t[3]||(t[3]=(...e)=>o.mouseup&&o.mouseup(...e))},[((0,a.wg)(),(0,a.iD)("foreignObject",{width:o.w,height:o.h,x:"0",y:"0"},[n.node.type===o.NodeTypes.text?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,p.C_)(n.node.class)},(0,p.zw)(n.node.content),3)):(0,a.kq)("",!0),n.node.type===o.NodeTypes.image?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,p.C_)(n.node.class)},[(0,a._)("img",{width:o.w,src:n.node.content},null,8,S)],2)):(0,a.kq)("",!0)],8,_))],40,O)}var j={props:{onMouseDown:Function,node:Object},setup(e,{emit:t}){const n=(0,N.iH)(e.node.x),o=(0,N.iH)(e.node.y);let a=!1;const r=function(e,t){a=!0,n.value+=e,o.value+=t},s=function(t){t.stopPropagation(),t.preventDefault(),e.onMouseDown&&e.onMouseDown(r)},i=(0,N.iH)(0),c=(0,N.iH)(0);e.node.type===D.text?(i.value=400,c.value=80):e.node.type===D.image&&(i.value=150,c.value=150);const u=function(){},l=function(){},d=function(){a||t("onNodeClicked"),a=!1};return{NodeTypes:D,x:n,y:o,mousedown:s,w:i,h:c,mouseenter:u,mouseleave:l,mouseup:d}}};const M=(0,c.Z)(j,[["render",W]]);var H=M;const E={class:"flex flex-wrap gap-4"},A=["onClick"];function F(e,t,n,o,r,s){return(0,a.wg)(),(0,a.iD)("div",E,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.buttons,((e,t)=>((0,a.wg)(),(0,a.iD)("button",{class:(0,p.C_)({"button-37":!e.on,"button-37-on":e.on}),key:t,onClick:t=>o.clickButton(e)},(0,p.zw)(e.text),11,A)))),128))])}var L={props:{content:Array},setup(e,{emit:t}){const n=(0,N.iH)(e.content),o=function(e){t("buttonClicked",e)};return{buttons:n,clickButton:o}}};const V=(0,c.Z)(L,[["render",F],["__scopeId","data-v-134a7f0d"]]);var Y=V,B=JSON.parse('{"N":[{"id":"001","info":"Hello there, welcome to our Narrative Writing lesson today! Shall we start?","actions":[{"type":"options","options":[{"text":"Yes","reply":"Great, let\'s go!","next":"004"},{"text":"No","reply":"That\'s ok, let me know when you are ready!","next":"001"}]}]},{"id":"004","info":"Alright, first, do you want to pick a genre? It may help narrowing down your writing.","actions":[{"type":"options","options":[{"text":"Sure","reply":"","next":"005"},{"text":"No thanks, I have an idea in mind","reply":"Alrighty then! Can you type your idea?","next":"009"}]}]},{"id":"005","info":"Alright, pick a genre you want...","actions":[{"type":"options","options":[{"text":"Historical","reply":"","next":"006","save":"genre"},{"text":"Action","reply":"","next":"006","save":"genre"},{"text":"Romance","reply":"","next":"006","save":"genre"},{"text":"Horror","reply":"","next":"006","save":"genre"},{"text":"Comedy","reply":"","next":"006","save":"genre"},{"text":"Fantasy","reply":"","next":"006","save":"genre"}]}]},{"id":"006","info":"","actions":[{"type":"publish","text":"Story genre: {genre}","varNames":["genre"]},{"type":"next","next":"007"}]},{"id":"007","info":"Now, can you think of an idea to write a story about based on {genre}?","varNames":["genre"],"actions":[{"type":"options","options":[{"text":"Yes","reply":"Great, can you type your idea?","next":"009"},{"text":"I need help","reply":"That\'s ok, here are some ideas for you...","next":"008"}]}]},{"id":"008","info":"","actions":[{"type":"listStoryIdeas","seed":"{genre}","number":4,"grade":3,"maxWords":12,"save":"userIdea","varNames":["genre"],"options":[{"text":"I don\'t like any above","reply":"Thatâ€™s ok, here are some more...","next":"008"}]},{"type":"next","next":"010"}]},{"id":"009","info":"","actions":[{"type":"saveInput","varName":"idea"},{"type":"rephrase","text":"Cool, so your idea is about \'{userIdea}\', is that correct?","input":"{idea}","save":"userIdea","varNames":["idea","userIdea"],"options":[{"text":"Yes","reply":"That is a nice idea!","next":"010"},{"text":"No","reply":"That\'s ok, try to type your idea again","next":"009"}]}]},{"id":"010","info":"","actions":[{"type":"publish","text":"Story Idea: {userIdea}","varNames":["userIdea"]},{"type":"next","next":"011"}]},{"id":"011","info":"Now, based on your idea, what or who is the main character in your story?","input":true,"actions":[{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here are a few names you can use as for your main character:","next":"013"}]},{"type":"saveInput","varName":"mainChar"},{"type":"next","next":"012"}]},{"id":"012","info":"","actions":[{"type":"publish","text":"Main Character: {mainChar}","varNames":["mainChar"]},{"type":"next","next":"014"}]},{"id":"013","info":"","actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"names","desc":"main character","number":5,"save":"mainChar","varNames":["userIdea"]},{"type":"next","next":"012"}]},{"id":"014","info":"Can you give more description of your character? age, gender, feeling (emotion) anything.","actions":[{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, let me help you.","next":"016"}]},{"type":"saveInput","varName":"idea"},{"type":"rephrase","text":"Cool, so your character \'{mainChar}\' is \'{desc}\', is that correct?","input":"{idea}","save":"desc","varNames":["mainChar","desc","idea"],"options":[{"text":"Yes","reply":"","next":"015"},{"text":"No","reply":"","next":"014"}]}]},{"id":"015","info":"","actions":[{"type":"publish","text":"{desc}","varNames":["desc"]},{"type":"next","next":"018"}]},{"id":"016","info":"Ok, so, {mainChar} can feel...","varNames":["mainChar"],"actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"emotions","desc":"the feelings of the character","number":4,"save":"desc","varNames":["userIdea","mainChar"]},{"type":"next","next":"017"}]},{"id":"017","info":"And {mainChar} can look like...","varNames":["mainChar"],"actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"appearance","desc":"how the main character look like","number":4,"append":"desc","varNames":["userIdea"]},{"type":"publish","text":"{desc}","varNames":["desc"]},{"type":"next","next":"018"}]},{"id":"018","info":"Do you want to generate an image of your character?","actions":[{"type":"options","options":[{"text":"Yes","next":"019"},{"text":"No","next":"020"}]}]},{"id":"019","info":"","actions":[{"type":"makeImage","text":"{userIdea}, {desc}","varNames":["userIdea","desc"]},{"type":"next","next":"020"}]},{"id":"020","info":"Where does the story take place?","actions":[{"type":"options","options":[{"text":"I need help","next":"021"}]},{"type":"saveInput","varName":"place"},{"type":"publish","text":"{place}","varNames":["place"]},{"type":"next","next":"022"}]},{"id":"021","info":"","actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}","term":"places","desc":"where the story can take place","number":4,"save":"place","varNames":["userIdea"]},{"type":"publish","text":"{place}","varNames":["place"]},{"type":"next","next":"022"}]},{"id":"022","info":"What do the main characters want to do?","actions":[{"type":"options","options":[{"text":"I need help","next":"023"}]},{"type":"saveInput","varName":"mainObjective"},{"type":"next","next":"024"}]},{"id":"023","info":"","actions":[{"type":"listIdeasFromIdea","idea":"{userIdea}, {desc}","term":"actions","desc":"what the main character in the story wants to do","number":4,"save":"mainObjective","varNames":["userIdea","desc"]},{"type":"publish","text":"{mainObjective}","varNames":["mainObjective"]},{"type":"next","next":"024"}]},{"id":"024","info":"When does the story take place?","actions":[{"type":"options","options":[{"text":"Day","reply":"","next":"025","save":"storyTime"},{"text":"Night","reply":"","next":"025","save":"storyTime"}]}]},{"id":"025","info":"Great, let\'s write an introduction of story based on \'{userIdea}\' within 50 words.","input":true,"varNames":["userIdea"],"actions":[{"type":"options","options":[{"text":"I need help","reply":"That\'s ok, here is an example introduction for your story...","next":"026"}]},{"type":"saveInput","varName":"introduction"}]},{"id":"026","info":"Please wait... I am trying... ^_^","actions":[{"type":"writeStoryIntroduction","seed":"{userIdea}. And the main character is {mainChar}, and {desc}. This story happens at {place}","grade":3,"maxWords":80,"varNames":["userIdea","mainChar","desc","place"],"save":"introduction"},{"type":"next","next":"027"}]},{"id":"027","info":"Do you want to generate an image about the scene?","actions":[{"type":"options","options":[{"text":"Yes","reply":"","next":"028"},{"text":"No","reply":"","next":"029"}]}]},{"id":"028","info":"","actions":[{"type":"makeImage","text":"{introduction}","varNames":["introduction"]},{"type":"next","next":"029"}]},{"id":"029","info":"Cool! Look at on your canvas at the right, it is a very nice story, feel free to make modifications, and show them to your parents and friends!","actions":[]}]}'),Z={async serviceRephrase(e,t,n,o){const a="rephrase this text '{input}' with correct grammar, that is understandable by {grade}-grade students, and do not use more than {maxWords} words.",r=a.replace("{input}",t).replace("{grade}",n).replace("{maxWords}",o),s=await e.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"user",content:r}]});return console.log(s),s.data.choices[0].message.content},async serviceWriteStoryIntroduction(e,t,n,o){const a="Write an introduction for a story based on the idea of '{idea}'. The story is writen as first person. Do not exceed {maxWords} words. This writing must be easy to understand for {grade}-grade students.",r=a.replace("{idea}",t).replace("{grade}",n).replace("{maxWords}",o);console.log(r);const s=await e.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a teacher to teach students how to make creative writing, you will generate appropriate exemplary writing for students to follow."},{role:"user",content:r}]});return console.log(s),s.data.choices[0].message.content},async serviceListIdeasFromIdea(e,t,n,o,a){const r="Based on the idea of '{idea}', list {number} {term} which could be '{description}' in this idea.",s=r.replace("{idea}",t).replace("{term}",n).replace("{number}",a).replace("{description}",o);console.log(s);const i=await e.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are an idea generator, and you only reply with JSON format. Only write out the result as a single array of Strings within a JSON string array under the attribute named 'items'."},{role:"user",content:s}]});return console.log(i),i.data.choices[0].message.content},async serviceListStoryIdeas(e,t,n,o,a){const r="List {number} story ideas about '{seed}', which are appropriate for {grade}-grade school students. Describe each idea with only one short sentence, do not use more than {maxWords} words.",s=r.replace("{seed}",t).replace("{number}",n).replace("{grade}",o).replace("{maxWords}",a);console.log(s);const i=await e.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are an idea generator, and you only reply with JSON format. Only write out the result as a single array of Strings within a JSON string array under the attribute named 'items'."},{role:"user",content:s}]});return console.log(i),i.data.choices[0].message.content},async serviceMakeImage(e,t){const n="image for kids, no words, no text, {text}".replace("{text}",t);console.log(n);const o=await e.createImage({prompt:n,n:2,size:"512x512"}),a=[];return o.data.data.forEach((function(e){a.push(e.url)})),a}},P={assignVar(e,t,n){let o=e;return t.forEach((function(e){o.includes("{"+e+"}")&&(o=o.replace("{"+e+"}",n.get(e)))})),o}};const J={class:"bg-gray-200 rounded-lg w-96 h-96 p-8"},K=(0,a._)("p",{class:"text-red-500"},"Editor Window",-1);function U(e,t,n,r,s,i){return(0,a.wg)(),(0,a.iD)("div",J,[K,(0,a.wy)((0,a._)("textarea",{type:"textArea",class:"border border-blue-800 h-2/3 w-full","onUpdate:modelValue":t[0]||(t[0]=e=>r.userText=e)},null,512),[[o.nr,r.userText]])])}var q={props:{content:String},setup(e){const t=(0,N.iH)(e.content);return{userText:t}}};const z=(0,c.Z)(q,[["render",U]]);var R=z,G={name:"HomeView",components:{MyNode:H,MyButtons:Y},setup(){const e=(0,I.Z)();console.log(e);const t=(0,N.iH)(""),n=(0,N.iH)([]),o=(0,N.iH)(!0),r=(0,N.iH)(null),i=new C.Configuration({apiKey:D.k2+D.k1+D.k3}),c=new C.OpenAIApi(i),u=new Map,l=new Map;B.N.forEach((function(e){e.id&&l.set(e.id,e)}));let d=[];const p=function(e){l.has(e)?(n.value[0]&&n.value[0].type===D.buttons&&n.value.shift(),o.value=!0,setTimeout((async function(){const t=l.get(e);if(t.info){let e=t.info;t.varNames&&(e=P.assignVar(e,t.varNames,u)),n.value.unshift({content:[e],self:!1,type:D.text,nodeId:(0,I.Z)()})}console.log("section: "+t.id),d=JSON.parse(JSON.stringify(t.actions)),await m()}),1e3)):alert("Course data is not complete!")},m=async function(){while(d.length){const e=d.shift();if(console.log(e.type),"next"===e.type){p(e.next);break}if("saveInput"===e.type){if(!u.has("input")){o.value=!1,d.unshift(e);break}u.set(e.varName,u.get("input")),u.delete("input")}else if("rephrase"===e.type){const t=P.assignVar(e.input,e.varNames,u);console.log("rephrase:"+t);const o=await Z.serviceRephrase(c,t,3,10);u.set(e.save,o);const a=P.assignVar(e.text,e.varNames,u);n.value.unshift({content:[a],self:!1,type:D.text,nodeId:(0,I.Z)()});const r={content:[],self:!0,type:D.buttons,nodeId:(0,I.Z)()};e.options.forEach((function(e){r.content.push({text:e.text,on:!1,next:e.next,reply:e.reply})})),n.value.unshift(r)}else if("options"===e.type){const t={content:[],self:!0,type:D.buttons,nodeId:(0,I.Z)()};e.options.forEach((function(e){t.content.push({text:e.text,on:!1,next:e.next,reply:e.reply,save:e.save})})),n.value.unshift(t)}else if("publish"===e.type){let t=P.assignVar(e.text,e.varNames,u);y.value.push({content:t,x:100,y:100*y.value.length+100,type:D.text,class:"text-blue-500 text-lg"})}else if("writeStoryIntroduction"===e.type){e.seed=P.assignVar(e.seed,e.varNames,u);const t=await Z.serviceWriteStoryIntroduction(c,e.seed,e.grade,e.maxWords);u.set(e.save,t),n.value.unshift({content:[t],self:!1,type:D.text,nodeId:(0,I.Z)()})}else{if("listIdeasFromIdea"===e.type){const t=P.assignVar(e.idea,e.varNames,u),o=await Z.serviceListIdeasFromIdea(c,t,e.term,e.desc,e.number),a=Object.values(JSON.parse(o))[0],r={content:[],self:!0,type:D.buttons,nodeId:(0,I.Z)()};a.forEach((function(t){r.content.push({text:t,on:!1,next:"",reply:"",save:e.save,append:e.append})})),n.value.unshift(r);break}if("listStoryIdeas"===e.type){const t=P.assignVar(e.seed,e.varNames,u),o=await Z.serviceListStoryIdeas(c,t,e.number,e.grade,e.maxWords),a=Object.values(JSON.parse(o))[0],r={content:[],self:!0,type:D.buttons,nodeId:(0,I.Z)()};a.forEach((function(t){r.content.push({text:t,on:!1,next:"",reply:"",save:e.save})})),e.options&&e.options.forEach((function(e){r.content.push({text:e.text,on:!1,next:e.next,reply:e.reply,save:e.save})})),n.value.unshift(r);break}if("makeImage"===e.type){const t=P.assignVar(e.text,e.varNames,u),o=await Z.serviceMakeImage(c,t),a={content:o,self:!1,type:D.image};n.value.unshift(a)}}}setTimeout((function(){r.value.scrollIntoView({behavior:"smooth",block:"end"})}),500)};(0,a.bv)((function(){p("001")}));const y=(0,N.iH)([]),f=async function(e){if(!e.done){if(e.on=!0,e.done=!0,n.value.shift(),n.value.unshift({content:[e.text],self:!0,type:D.text}),e.reply&&n.value.unshift({content:[e.reply],self:!1,type:D.text}),y.value.length&&e.cancel&&y.value.pop(),e.save&&u.set(e.save,e.text),e.append){const t=u.get(e.append);t?u.set(e.append,t+", "+e.text):u.set(e.append,e.text)}e.next?p(e.next):await m()}},h=async function(){if(!t.value)return;const e=t.value;t.value="",o.value?alert("We are not anticipating input text now..."):(u.set("input",e),n.value[0]&&n.value[0].type===D.buttons&&n.value.shift(),n.value.unshift({content:[e],self:!0,type:D.text}),o.value=!0,await m())},v=async function(){if(o.value)return;if(!t.value)return;o.value=!0;const e=t.value;t.value="";const a=await w(e);n.value.unshift({content:[e],self:!0,type:D.text}),0===a?await g(e):1===a&&await x(e),o.value=!1},g=async function(t){const o=await c.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"user",content:t}],user:e});console.log(o.data),n.value.unshift({content:[o.data.choices[0].message.content],self:!1,type:D.text})},x=async function(t){const o=await c.createImage({prompt:t,n:2,size:"512x512",user:e}),a={content:[],self:!1,type:D.image};console.log(o.data),o.data.data.forEach((function(e){a.content.push(e.url)})),n.value.unshift(a)},w=async function(e){const t=T.checkIntention.text.replace(T.checkIntention.input,e),n=await c.createCompletion({model:"text-davinci-003",prompt:t,temperature:0});console.log(n);const o=n.data.choices[0].text.trim().toLowerCase();return console.log(o),o.includes(T.checkIntention.expectations[0])?0:o.includes(T.checkIntention.expectations[1])?1:(alert("Unknown error"),-1)};let b=null;const k=function(e,t){b={content:e,class:"",type:t}},O=function(e){e.preventDefault()},_=function(e){if(e.preventDefault(),b){const t=e.target.getBoundingClientRect();b.x=e.clientX-t.left,b.y=e.clientY-t.top,y.value.push(b),b=null}};let S=null;const W=function(e){S=e};let j=0,M=0;const H=function(e){S&&(e.preventDefault(),S(e.x-j,e.y-M)),j=e.x,M=e.y},E=function(){S=null},A=function(e){const t={content:e.content};(0,s.h7)(R,t)};return{NodeTypes:D,chatToSend:t,history:n,sending:o,test:v,startDrag:k,onDragover:O,onDrop:_,textNodes:y,onNodeMouseDown:W,mosemove:H,mouseup:E,pickOption:f,test2:h,clickCanvasNode:A,chatBottom:r}}};const Q=(0,c.Z)(G,[["render",k],["__scopeId","data-v-13e38207"]]);var X=Q;const $=[{path:"/",name:"home",component:X},{path:"/about",name:"about",component:function(){return n.e(443).then(n.bind(n,627))}}],ee=(0,d.p7)({history:(0,d.r5)(),routes:$});var te=ee,ne=n(3907),oe=(0,ne.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}}),ae=(n(9773),n(6579)),re=n(9180),se=n(6300);const ie=(0,ae.Rd)({components:re,directives:se,theme:{defaultTheme:"light"}});(0,o.ri)(l).use(oe).use(te).use(ie).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,r){if(!o){var s=1/0;for(l=0;l<e.length;l++){o=e[l][0],a=e[l][1],r=e[l][2];for(var i=!0,c=0;c<o.length;c++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[c])}))?o.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[o,a,r]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/about.203bad97.js"}}(),function(){n.miniCssF=function(e){return"css/about.44579d33.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vital:";n.l=function(o,a,r,s){if(e[o])e[o].push(a);else{var i,c;if(void 0!==r)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+r){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",t+r),i.src=o),e[o]=[a];var p=function(t,n){i.onerror=i.onload=null,clearTimeout(m);var a=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,o,a){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var s=function(n){if(r.onerror=r.onload=null,"load"===n.type)o();else{var s=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=i,r.parentNode&&r.parentNode.removeChild(r),a(c)}};return r.onerror=r.onload=s,r.href=t,n?n.parentNode.insertBefore(r,n.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o],r=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(r===e||r===t))return a}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){a=s[o],r=a.getAttribute("data-href");if(r===e||r===t)return a}},o=function(o){return new Promise((function(a,r){var s=n.miniCssF(o),i=n.p+s;if(t(s,i))return a();e(o,i,null,a,r)}))},a={143:0};n.f.miniCss=function(e,t){var n={443:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var r=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=r);var s=n.p+n.u(t),i=new Error,c=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var r=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",i.name="ChunkLoadError",i.type=r,i.request=s,a[1](i)}};n.l(s,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,r,s=o[0],i=o[1],c=o[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(c)var l=c(n)}for(t&&t(o);u<s.length;u++)r=s[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},o=self["webpackChunkvital"]=self["webpackChunkvital"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(7854)}));o=n.O(o)})();
//# sourceMappingURL=app.19ab9bd1.js.map